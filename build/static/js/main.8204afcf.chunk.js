(this.webpackJsonptodolists=this.webpackJsonptodolists||[]).push([[0],{14:function(t,e,a){t.exports={reg_container:"Registration_reg_container__wzEIp"}},16:function(t,e,a){t.exports={auth_container:"Auth_auth_container__35U4W"}},18:function(t,e,a){t.exports={errorText:"Error_errorText__3LEpv",timer:"Error_timer__2oSXs"}},32:function(t,e,a){t.exports={main_container:"Main_main_container__1wyhU"}},33:function(t,e,a){t.exports={activeButton:"Button_activeButton__1h8u7",addTaskButton:"Button_addTaskButton__1IrNC",taskButton:"Button_taskButton__mXhrz",link_button:"Button_link_button__1XK19",reg_button:"Button_reg_button__3x6Do",add_list_button:"Button_add_list_button__3QiTc",logOutButton:"Button_logOutButton__380wU"}},34:function(t,e,a){t.exports={taskInput:"Input_taskInput__2gLIe",add_list:"Input_add_list__i_MKP"}},38:function(t,e,a){t.exports=a(67)},43:function(t,e,a){},66:function(t,e,a){},67:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),s=a(31),i=a.n(s),o=(a(43),a(1)),c=a(2),u=a(4),l=a(3),d=a(5),m=a(12),h=a(32),p=a.n(h),E=a(11),f=a(16),_=a.n(f),v=a(33),k=a.n(v),b=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.value,a=t.action,n=t.itemId,s=t.styleClass,i=t.data,o=s?r.a.createElement("input",{type:"button",value:e,onClick:function(t){return a({e:t,itemId:n,data:i})},className:"".concat(k.a[s])}):r.a.createElement("input",{type:"button",value:e,onClick:function(t){return a({e:t,itemId:n,data:i})}});return r.a.createElement(r.a.Fragment,null,o)}}]),e}(r.a.Component),T=a(34),g=a.n(T),A=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.imputType,a=void 0===e?"text":e,n=t.imputId,s=t.imputValue,i=t.action,o=t.focus,c=void 0!==o&&o,u=t.keyAction,l=void 0===u?null:u,d=t.blur,m=void 0===d?null:d,h=t.name,p=t.fieldType,E=void 0===p?null:p,f=t.placeholder,_=void 0===f?null:f;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:a,id:n,value:s,onChange:function(t){return i(t,E)},autoFocus:c,onKeyPress:function(t){l&&l(t)},onBlur:function(){m&&m()},className:"".concat(g.a[h]),placeholder:_}))}}]),e}(r.a.Component),S=a(35).create({baseURL:"https://arcane-stream-95803.herokuapp.com",withCredentials:!0}),y=function(){return S.get("main")},I=function(t){return S.post("main",{listName:t})},N=function(t){return S.delete("main",{data:{listId:t}})},O=function(t,e){return S.put("main",{listId:t,newListName:e})},x=function(t){return S.get("tasks",{params:{listId:t}})},j=function(t){return S.post("tasks",{task:t})},C=function(t,e,a){return S.put("tasks",{listId:t,taskId:e,currentStatus:a})},L=function(t,e,a){return S.put("tasks/editTask",{listId:t,taskId:e,newTaskText:a})},F=function(t,e){return S.delete("tasks",{data:{listId:t,taskId:e}})},B=function(){return S.get("auth/isAuth")},w=function(t){return S.post("auth/auth",Object(E.a)({},t))},D=function(t){return S.post("auth/registartion",Object(E.a)({},t))},P=function(){return S.put("auth/logout")},H=a(6),U=a(7),V=a.n(U),R=a(18),M=a.n(R),z=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={timerId:null,timer:0,errorText:""},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.errorText;this.setState({timer:5,errorText:t})}},{key:"componentDidUpdate",value:function(t,e,a){var n=this,r=this.state.timer;0===r?this.props.errorReset():setTimeout((function(){return n.setState({timer:r-1})}),1e3)}},{key:"render",value:function(){var t=this.state.errorText,e=this.state.timer;return r.a.createElement("div",null,r.a.createElement("div",{className:M.a.errorText},t),r.a.createElement("div",null,"The error text will be clean after ",r.a.createElement("span",{className:M.a.timer},e)," seconds"))}}]),e}(r.a.Component),J="Complete",K="In progress",Q={all:"All",complete:"Complete",inProgress:"In progress"},X=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t))).componentDidMount=function(){var t=a.props.listId;x(t).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({tasks:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a._onTypeText=function(t){var e=t.target.value;a.setState({field:e})},a._onAddTask=function(t){t.e.preventDefault();var e=a.props.listId;if(""!==a.state.field.trim()){var n={taskText:a.state.field,taskStatus:K,isEdit:!1,listId:e};j(n).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({field:"",tasks:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))}else a.setState({isError:!0,errorText:"The field cannot be empty"})},a._onChangeTaskStatus=function(t){var e=t.e,n=t.itemId,r=t.data;e.preventDefault();var s=a.props.listId;C(s,n,r).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({tasks:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a._onFilterTasks=function(t){var e=t.e,n=t.itemId;e.preventDefault(),a.setState({taskView:n})},a._onEditTask=function(t){var e=t.e,n=t.taskId;e.preventDefault();var r=Object(H.a)(a.state.tasks),s="";r.forEach((function(t){t._id===n&&(t.isEdit=!t.isEdit,s=t.taskText)})),a.setState({tasks:r,editField:s,prevTextTask:s,editItemId:n})},a._onEditText=function(t){var e=t.target.value;a.setState({editField:e})},a._onSaveEditTask=function(){var t=a.props.listId;if(""!==a.state.editField.trim()){if(a.state.prevTextTask===a.state.editField.trim()){var e=Object(H.a)(a.state.tasks);return e.forEach((function(t){t._id===a.state.editItemId&&(t.isEdit=!t.isEdit)})),void a.setState({tasks:e,editField:"",prevTextTask:"",editItemId:""})}L(t,a.state.editItemId,a.state.editField).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({editField:"",prevTextTask:"",editItemId:null,tasks:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))}else a.setState({isError:!0,errorText:"The task text field cannot be empty"})},a._onPressEnter=function(t){"Enter"===t.key&&a._onSaveEditTask()},a._onPressEnterToAddTask=function(t){"Enter"===t.key&&a._onAddTask({e:t})},a._onBlurEditTask=function(){a._onSaveEditTask()},a._onDeleteTask=function(t){var e=t.e,n=t.itemId;e.preventDefault();var r=a.props.listId;F(r,n).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({tasks:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a._onStartEditListHeader=function(t){a.setState({isEditHeader:!a.state.isEditHeader,editListName:t,prevListName:t})},a._onEditHeader=function(t){var e=t.target.value;a.setState({editListName:e})},a._onSaveHeader=function(t){void 0!==t&&"Enter"!==t.key||(a.props.editListName(a.props.listId,a.state.editListName,a.state.prevListName),a.setState({editListName:"",isEditHeader:!a.state.isEditHeader,prevListName:""}))},a._onResetError=function(){a.setState({isError:!1,errorText:""})},a.state={field:"",tasks:[],taskView:Q.all,prevTextTask:"",editField:"",editItemId:null,prevListName:"",editListName:"",isEditHeader:!1,isError:!1,errorText:""},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.listName,n=e.listId,s=e.deleteList,i=this.state.isEditHeader?r.a.createElement(A,{imputValue:this.state.editListName,focus:!0,action:this._onEditHeader,keyAction:this._onSaveHeader,blur:this._onSaveHeader}):r.a.createElement("h2",{onDoubleClick:function(){return t._onStartEditListHeader(a)},title:"Make double click to change"},a),o=function(t,e){var a=Object(H.a)(t);return e===Q.all?a:e===Q.complete?a.filter((function(t){return t.taskStatus===J})):e===Q.inProgress?a.filter((function(t){return t.taskStatus===K})):t}(this.state.tasks,this.state.taskView).map((function(e,a){return r.a.createElement("div",{className:V.a.taskContainer,key:"".concat(e.taskText,"-").concat(a)},r.a.createElement("div",{className:"".concat(V.a.taskNumber," ").concat(V.a.taskItem)},a+1,"."),r.a.createElement("div",{className:"".concat(V.a.taskText," ").concat(V.a.taskItem),onDoubleClick:function(a){return t._onEditTask({e:a,taskId:e._id})},title:"Make double click to change"},e.isEdit?r.a.createElement(A,{imputValue:t.state.editField,focus:!0,action:t._onEditText,keyAction:t._onPressEnter,blur:t._onBlurEditTask}):e.taskText),r.a.createElement("div",{className:"".concat(V.a.taskStatus," ").concat(V.a.taskItem)},e.taskStatus),r.a.createElement("div",{className:"".concat(V.a.taskButtons," ").concat(V.a.taskItem)},e.taskStatus===K?r.a.createElement(b,{value:"Complete Task",action:t._onChangeTaskStatus,itemId:e._id,styleClass:"taskButton",data:e.taskStatus}):r.a.createElement(b,{value:"Undo",action:t._onChangeTaskStatus,itemId:e._id,styleClass:"taskButton",data:e.taskStatus}),r.a.createElement(b,{value:"Delete",action:t._onDeleteTask,itemId:e._id,styleClass:"taskButton"})))})),c=[];for(var u in Q)this.state.taskView===Q[u]?c.push(r.a.createElement(b,{value:Q[u],action:this._onFilterTasks,itemId:Q[u],styleClass:"activeButton",key:"".concat(u)})):c.push(r.a.createElement(b,{value:Q[u],action:this._onFilterTasks,itemId:Q[u],key:"".concat(u)}));var l=[r.a.createElement("div",{className:V.a.tasksContainer,key:"task_with_filterButtons-".concat(n)},o,r.a.createElement("div",{className:"".concat(V.a.tasksFilter)},c)),r.a.createElement("div",{className:V.a.deleteList,key:"delete_list-".concat(n)},r.a.createElement(b,{value:"Delete list",itemId:n,action:s}))],d=this.state.isError?r.a.createElement(z,{errorText:this.state.errorText,errorReset:this._onResetError}):l;return r.a.createElement("div",{className:V.a.listContainer},i,r.a.createElement("div",{className:V.a.proposal},r.a.createElement("label",{htmlFor:"".concat(a,"_").concat(n)},"Enter your task, please!"),r.a.createElement(A,{imputId:"".concat(a,"_").concat(n),imputValue:this.state.field,action:this._onTypeText,name:"taskInput",keyAction:this._onPressEnterToAddTask}),r.a.createElement(b,{value:"Add",action:this._onAddTask,styleClass:"addTaskButton"})),d)}}]),e}(r.a.Component);function Z(t){var e={isError:!1};for(var a in t){var n="error".concat(a.charAt(0).toUpperCase()+a.slice(1));""===t[a].trim()?(e.isError=!0,e[n]="".concat(a," field cannot be empty")):e[n]=""}return e.errorEmail||0!==t.email.search(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&(e.isError=!0,e.errorEmail="error in email field"),e}var q=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t)))._onSignUp=function(){a.props.history.push("/registration")},a._onChangeField=function(t,e){"email"===e?a.setState({email:t.target.value}):"pass"===e&&a.setState({pass:t.target.value})},a._sigIn=function(){var t={email:a.state.email,pass:a.state.pass},e=Z(t);if(e.isError)return delete e.isError,void a.setState(Object(E.a)({},e));w(t).then((function(t){return a.props.changeAuth(t.data)})).catch((function(t){return a.setState(Object(E.a)({errorEmail:"",errorPass:""},t.response.data))}))},a.state={email:"",pass:"",errorEmail:"",errorPass:""},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(m.a,{to:"/app"}):r.a.createElement("div",{className:_.a.auth_container},r.a.createElement("div",{className:_.a.email},r.a.createElement("label",{htmlFor:"authEmail"},"Enter your email address:"),r.a.createElement(A,{imputType:"email",imputId:"authEmail",value:this.state.email,action:this._onChangeField,fieldType:"email",placeholder:"example@example.com"}),r.a.createElement("p",{className:"error"},this.state.errorEmail)),r.a.createElement("div",{className:_.a.pass},r.a.createElement("label",{htmlFor:"authPass"},"Enter your pass:"),r.a.createElement(A,{imputType:"password",imputId:"authPass",value:this.state.pass,action:this._onChangeField,fieldType:"pass"}),r.a.createElement("p",{className:"error"},this.state.errorPass)),r.a.createElement("div",{className:_.a.links},r.a.createElement(b,{value:"Sign up",action:this._onSignUp,styleClass:"link_button"}),r.a.createElement(b,{value:"Sign in",action:this._sigIn,styleClass:"link_button"})))}}]),e}(r.a.Component),W=Object(m.g)(q),$=a(14),G=a.n($),Y=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t)))._onChangeField=function(t,e){switch(e){case"name":a.setState({name:t.target.value});break;case"surname":a.setState({surname:t.target.value});break;case"email":a.setState({email:t.target.value});break;case"pass":a.setState({pass:t.target.value})}},a._sigUp=function(){var t={name:a.state.name,surname:a.state.surname,email:a.state.email,pass:a.state.pass},e=Z(t);if(e.isError)return delete e.isError,void a.setState(Object(E.a)({},e));D(t).then((function(t){return a.props.changeAuth(t.data)})).catch((function(t){return a.setState(Object(E.a)({errorName:"",errorSurname:"",errorEmail:"",errorPass:""},t.response.data))}))},a.state={name:"",surname:"",email:"",pass:"",errorName:"",errorSurname:"",errorEmail:"",errorPass:""},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(m.a,{to:"/app"}):r.a.createElement("div",{className:G.a.reg_container},r.a.createElement("div",{className:G.a.name},r.a.createElement("label",{htmlFor:"regName"},"Enter your name"),r.a.createElement(A,{imputId:"regName",value:this.state.name,action:this._onChangeField,fieldType:"name",placeholder:"Bob"}),r.a.createElement("p",null,this.state.errorName)),r.a.createElement("div",{className:G.a.surname},r.a.createElement("label",{htmlFor:"regSurname"},"Enter your surname"),r.a.createElement(A,{imputId:"regSurname",value:this.state.surname,action:this._onChangeField,fieldType:"surname",placeholder:"Stone"}),r.a.createElement("p",null,this.state.errorSurname)),r.a.createElement("div",{className:G.a.email},r.a.createElement("label",{htmlFor:"regEmail"},"Enter your email address"),r.a.createElement(A,{imputType:"email",imputId:"regEmail",value:this.state.email,action:this._onChangeField,fieldType:"email",placeholder:"example@example.com"}),r.a.createElement("p",null,this.state.errorEmail)),r.a.createElement("div",{className:G.a.pass},r.a.createElement("label",{htmlFor:"regPass"},"Enter your pass"),r.a.createElement(A,{imputType:"password",imputId:"regPass",value:this.state.pass,action:this._onChangeField,fieldType:"pass"}),r.a.createElement("p",null,this.state.errorPass)),r.a.createElement(b,{value:"Sign up",action:this._sigUp,styleClass:"reg_button"}))}}]),e}(r.a.Component),tt=(a(66),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t))).componentDidMount=function(){a.props.isAuth&&y().then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({lists:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a._onType=function(t){var e=t.target.value;a.setState({listName:e})},a._onAddList=function(){""!==a.state.listName.trim()?I(a.state.listName).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({lists:Object(H.a)(t.data.data),listName:""})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})})):a.setState({isError:!0,errorText:"The field cannot be empty"})},a._onPressEnter=function(t){"Enter"===t.key&&a._onAddList()},a._onDeleteList=function(t){var e=t.itemId;N(e).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({lists:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a._onSaveNewListName=function(t,e,n){e.trim()!==n&&(""!==e.trim()?O(t,e).then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});a.setState({lists:Object(H.a)(t.data.data)})})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})})):a.setState({isError:!0,errorText:"The field cannot be empty"}))},a._onResetError=function(){a.setState({isError:!1,errorText:""})},a._onLogOut=function(){P().then((function(t){if(!t.data.isAuth)return a.props.changeAuth({isAuth:t.data.isAuth});alert("Something went wrong, try again later")})).catch((function(t){return a.setState({isError:!0,errorText:t.response.data})}))},a.state={listName:"",lists:[],isError:!1,errorText:""},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this;if(!this.props.isAuth)return r.a.createElement(m.a,{to:"/auth"});var e=this.state.lists.map((function(e){return r.a.createElement(X,{listName:e.listName,listId:e._id,key:"key-".concat(e._id),deleteList:t._onDeleteList,editListName:t._onSaveNewListName,taskView:e.taskView,appId:"toDoLists",changeAuth:t.props.changeAuth})})),a=this.state.isError?r.a.createElement(z,{errorText:this.state.errorText,errorReset:this._onResetError}):e;return r.a.createElement("div",{className:"app_container"},r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"app_h1"},"Enter the name of new list, please!"),r.a.createElement(b,{value:"Log out",action:this._onLogOut,styleClass:"logOutButton"})),r.a.createElement(A,{imputValue:this.state.listName,action:this._onType,keyAction:this._onPressEnter,name:"add_list"}),r.a.createElement(b,{value:"Add list",action:this._onAddList,styleClass:"add_list_button"})),r.a.createElement("div",{className:"app_lists_container"},a))}}]),e}(r.a.Component)),et=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(u.a)(this,Object(l.a)(e).call(this,t)))._changeAuth=function(t){a.state.isAuth!==t.isAuth&&a.setState({isAuth:t.isAuth})},a.state={isAuth:!1},a}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;B().then((function(e){t.state.isAuth!==e.data.isAuth&&t.setState({isAuth:e.data.isAuth})})).catch((function(t){return console.log("Auth DidMount err",t)}))}},{key:"render",value:function(){var t=this.state.isAuth;return r.a.createElement("div",{className:p.a.main_container},r.a.createElement("h1",null,"The todo list - application which help to save your time"),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(W,{isAuth:t,changeAuth:this._changeAuth})),r.a.createElement(m.b,{path:"/auth"},r.a.createElement(W,{isAuth:t,changeAuth:this._changeAuth})),r.a.createElement(m.b,{path:"/registration"},r.a.createElement(Y,{isAuth:t,changeAuth:this._changeAuth})),r.a.createElement(m.b,{path:"/app"},r.a.createElement(tt,{isAuth:t,changeAuth:this._changeAuth}))))}}]),e}(r.a.Component),at=a(13);i.a.render(r.a.createElement(at.a,null,r.a.createElement(et,null)),document.getElementById("root"))},7:function(t,e,a){t.exports={listContainer:"List_listContainer__3T59U",proposal:"List_proposal__14Idr",taskContainer:"List_taskContainer__391cq",taskItem:"List_taskItem__3QaNr",taskText:"List_taskText__1DRnb",tasksFilter:"List_tasksFilter__3HJQi",deleteList:"List_deleteList__28Sd6"}}},[[38,1,2]]]);
//# sourceMappingURL=main.8204afcf.chunk.js.map